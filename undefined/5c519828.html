<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- hexo injector head_begin start --><style type="text/css">.douban-card-block {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    max-height: 400px;
}

.douban-card {
    display: flex;
    margin: 30px 10px;
    padding: 15px;
    border-radius: 15px;
    position: relative;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    color: antiquewhite;
    text-decoration: none;
}

.douban-card:hover {
    text-decoration: none;
}

.douban-card-bgimg {
    position: absolute;
    width: 115%;
    height: 115%;
    filter: blur(15px) brightness(0.6);
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-img {
    position: relative;
    height: 130px;
    width: 80px;
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
}

.douban-card-left:hover .douban-card-img {
    filter: blur(5px) brightness(0.6);
    transform: perspective(800px) rotateX(180deg);
}

.douban-card-left .douban-card-img {
    transition: all 500ms ease;
}

.douban-card-left {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.douban-card-left .douban-card-status {
    height: 130px;
    width: 80px;
    text-align: center;
    font-weight: bold;
    position: absolute;
    left: 0;
    top: 30%;
    transform: rotateX(180deg);
    backface-visibility: hidden;
    transition: all 500ms ease;
}

.douban-card-left:hover .douban-card-status {
    transform: perspective(800px) rotateX(0deg);
}

.douban-card-right {
    position: relative;
    display: flex;
    flex-direction: column;
    margin-left: 12px;
    font-size: 16px;
    font-family: "Courier New", Courier, monospace;
    line-height: 1.3;
    color: antiquewhite;
}

.douban-card-item {
    margin-top: 4px;
}
</style><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>最强渲染器 madVR - 使用指南（上篇） | 泛舟湖上</title><meta name="keywords" content="转载,madvr,影音相关"><meta name="author" content="Dyphire"><meta name="copyright" content="Dyphire"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="madVR - 使用指南（上篇）">
<meta property="og:type" content="article">
<meta property="og:title" content="最强渲染器 madVR - 使用指南（上篇）">
<meta property="og:url" content="https://dyphire.github.io/undefined/5c519828.html">
<meta property="og:site_name" content="泛舟湖上">
<meta property="og:description" content="madVR - 使用指南（上篇）">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/illust_69873967.webp">
<meta property="article:published_time" content="2021-06-18T08:32:47.000Z">
<meta property="article:modified_time" content="2023-09-23T12:24:42.887Z">
<meta property="article:author" content="Dyphire">
<meta property="article:tag" content="转载">
<meta property="article:tag" content="madvr">
<meta property="article:tag" content="影音相关">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/illust_69873967.webp"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2022/01/12/logo3.png"><link rel="canonical" href="https://dyphire.github.io/undefined/5c519828"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.json","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":100,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"它还没凉，请趁热吃","messageNext":"它已经凉了，请注意保质期"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '最强渲染器 madVR - 使用指南（上篇）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-09-23 20:24:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="泛舟湖上" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/06/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-play"></i><span> 番剧</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-paper-plane"></i><span> 说说</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/show/"><i class="fa-fw fas fa-music"></i><span> 影音</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comments"></i><span> 留言</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/illust_69873967.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">泛舟湖上</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-play"></i><span> 番剧</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page child" href="/games/"><i class="fa-fw fas fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-heartbeat"></i><span> 关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fas fa-paper-plane"></i><span> 说说</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/show/"><i class="fa-fw fas fa-music"></i><span> 影音</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw fas fa-comments"></i><span> 留言</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">最强渲染器 madVR - 使用指南（上篇）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-06-18T08:32:47.000Z" title="发表于 2021-06-18 16:32:47">2021-06-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-23T12:24:42.887Z" title="更新于 2023-09-23 20:24:42">2023-09-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Course/">Course</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="最强渲染器 madVR - 使用指南（上篇）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/undefined/5c519828.html#post-comment"><span class="waline-comment-count" id="/undefined/5c519828.html"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p><a href="/undefined/5c519828.html" title="最强渲染器 madVR - 使用指南（上篇）">⚡️ 最强渲染器 madVR - 使用指南（上篇）</a> - <a href="/undefined/fa26939c.html" title="最强渲染器 madVR - 使用指南（下篇）">⚡️ 最强渲染器 madVR - 使用指南（下篇）</a></p>
</div>
<h2 id="madVR-概述">madVR 概述</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/9e1a97067f3c4d6b8faf59fcfb23945c.jpg" alt=""></p>
<p>（madVR 的开发者，德国人 Madshi）对于 madVR 渲染器，使用 PC 视频播放器的用户不会陌生。说它是 PC 电脑上的最强渲染器一点都不为过。有了它，PC 播放的画质超过顶级蓝光播放器不再是 “不可能的任务”。即使是这个神一般的工具，使用起来依然与大多数 PC 软件一样 - 设置选项繁多而且复杂。再加上这是一个由德国人开发的软件，菜单统统是英文的，对于大多数用户来说并不是很友好。</p>
<p>即使看到过几篇关于使用电脑播放器 + madVR 播放的文章，感觉作者也只是人云亦云，一知半解。以为自己安装了 madVR 就万事 OK 了。殊不知，madVR 的强大远远超出了人们的想象。</p>
<p>幸好，一名叫做 “萬年冷凍庫” 的朋友（应该是台湾人），在 Blogspot 发布一篇大约 3 万字的 madVR 使用指南。详细到每一项设置该如何调整，最终测试效果如何。相信读完这篇文章，大家都能成为 PC 视频播放的高手。原文在此：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://lysandria1985.blogspot.com/2013/01/3-madvr.html">萬年冷凍庫：系列之 3─最強渲染器 - madVR</a></p>
<p>由于一些不可抗力的原因，原文页面无法被大多数人访问，因此一烧体验馆将此文章搬运过来，分 2 篇进行连载。</p>
<h2 id="Devices">Devices</h2>
<h3 id="播放器准备工作">播放器准备工作</h3>
<p><strong>正文开始：（以下约一万字，请收藏文章后阅读）</strong></p>
<p>--------------- 分割线 ------------</p>
<p>在介绍这东西之前，先用张图来复习一下上回提到的播放过程：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/dd02b6ef876f4a46ae5cd565c7f5e9df.jpg" alt=""></p>
<p>这边可以看到视讯输出的最后一道过程就是 Video Renderer (视讯渲染器) 的部分，同时这个部份也是对画质影响最吃重的一个部分，在来源档案相同的前提下，可以说影像播放的画质好坏取决于渲染器之上也不为过，而 madVR 正是以此为最大卖点的渲染器，此渲染器是由 DOOM9 论坛上的 madshi 所开发，不惜一切效能代价以换取最大的画质表现，也因此这个渲染器对显卡的要求稍微吃重些，超越了我们一般对播放软件之硬件要求的常识 (这个常识是指，只有玩游戏才需要用到较高阶的显卡，影像播放只需要低阶显卡甚至内显已可胜任)，我们最好以 run 一个游戏的标准来看待其所需要的效能。但并不是说只有好的显卡才能用这个渲染器，事实上 madVR 内部的选项相当弹性，根据设置的不同它可以让低阶卡跟内显顺顺跑，也可以把 TiTan 操爆，一般来说，我建议在能力许可的范围内选择一张不算太差的独立显卡才能发挥它该有的战力。</p>
<p>翻译一下开发者 madshi 提到关于 madVR 的一些特色：</p>
<ul>
<li>高质量的 chroma upscaling (下面内文会再解释这东西)</li>
<li> 高质量的 scaling (各种升降频算法)</li>
<li> 高质量的 YCbCr→RGB 转换</li>
<li>对屏幕执行 gamut 和 gamma 的调色校正</li>
<li>内部演算皆为 16bit 的高精度处理</li>
<li>最后处理完成的 16bit 讯号 dithered 降转成 8bit RGB 输出</li>
<li>避开各种显卡内加料 (对画质有负面影响) 的算法</li>
<li>所有作业皆透过 GPU shaders 完成 (IVTC 运算除外)</li>
<li> 以追求最高质量为第一优先</li>
</ul>
<p>再重申一个观念，视讯档案的播放，解码吃的是 CPU 效能 (硬解例外，硬解是使用显卡上的译码模块，既不吃 CPU 也不吃 GPU 效能)，而渲染才是吃显卡 GPU 效能，使用 madVR 时，GPU 的效能很重要。</p>
<p>接下来进入正题，首先先到官方讨论页下载最新版的 madVR</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://forum.doom9.org/showthread.php?t=146228">madVR - 高品质的视频渲染器（GPU 辅助） - 末日 9 的论坛 (doom9.org)</a></p>
<p>或是到 madVR 官网下载：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://madvr.net/">http://madvr.net/</a></p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://madvr.com/">http://madvr.com/</a></p>
<p>madVR 目前还没有安装档，madshi 说他想到 v1.0 时再做安装档，所以下载后解压缩完自行将文件夹丢到想放的位置，像我还是习惯丢到 Program Files (x86) 下面，之后进 madVR 文件夹里点一下 "install.bat" 就会出现滤镜注册成功的讯息，以后要更新 madVR 只需要将文件夹整个盖过去即可。</p>
<p>"restore default settings.bat" 这个执行档可回复所有的 madVR 设定到初始默认值，如果设定时乱了套或是出现问题，可以点击这个执行档，重新开始。</p>
<p><strong>madVR 的初始默认值是重视效能取向和稳定性的，也就是让大部分的显卡都可以正常运作为前提的设置，懒的研究设置的朋友用默认值也可以顺顺使用 madVR，但如果想要进一步发挥 madVR 强大的功能，我们就再继续看下去。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/491a4d279b014cc091dc7f2f7f5512e8.jpg" alt=""></p>
<p>到 MPC-BE（小烧注：MPC-BE 播放器，其余支持滤镜的播放器也可以）里的选项 &gt; 视讯底下应该可以选择 madVR 了</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/e63989d388b6461ea0c3d6a5273cd6ed.jpg" alt=""></p>
<p>播放影片时，右键 &gt; 筛选器，底下选择 madVR 可以打开 madVR 的设定页，或是右下角的工具栏 madVR 图示上点右键并选择 "Edit madVR settings"，或是<strong>直接按 Ctrl+S</strong>，或是在外挂滤镜里加入 madVR 并点两下都可以打开设定页</p>
<img width="690" height="416" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/abc4388c2c7644f996c8d455d3c7dc63.jpg" class="jop-noMdConv">
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/ff9cc38ff0aa48438509e5aed94c3e5d.jpg" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/bad42c2e7e1542b195eb228e7d5d4772.jpg" alt=""></p>
<h3 id="显示器设置">显示器设置</h3>
<p>打开设定页，并将项目展开：</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/9fc18ed661234b7db33c8e7a4ad486e2.jpg" class="jop-noMdConv">
<p>"devices" 底下为目前连接的屏幕，目前显卡抓到几个这边看到的就是几个，将屏幕底下的项目展开可再针对各个屏幕做设定</p>
<p>第一个要先选择屏幕的种类，我想应该不用多做解释了，是哪种屏幕就选哪种，一般液晶 / 电浆 / OLED 屏幕或电视选择 "Digital Moniter/ TV" 即可，如果是投影机则选择 "DigitalProjetor"</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/7bbc2c6bcea14c35bd62a03098efa07a.jpg" class="jop-noMdConv">
<h3 id="properties">properties</h3>
<p>到 "properties" 这页，选择该屏幕的 output level，一般而言计算机屏幕选 0-255，电视的话选 16-235，不过有些较新的电视也接受 0-255 的讯号，这边注意电视的设置与 madVR 的设置要一致，否则有些色阶会被切掉，俗称黑位错误。(显卡控制接口上的设置则一律设为 "由应用程序决定" 即可，madVR 会决定最后输出的 output level)</p>
<p>详细可参考我的另一篇：浅谈 HTPC 与颜色管理─绪论与前置作业 (1/4)</p>
<p>而 bitdepth 的选择，这边可以维持预设的 "auto" 让 madVR 自行判断即可。</p>
<p>如果屏幕是原生 8bit (16.7 百万色) 或更高，或 6bit dither (抖色) 处理后有办法完整显示 16.7 百万色，则选单里可选择 8bit；如果屏幕是 6bit dither (抖色) 成 8bit 且只能显示 16.2 百万色的话，且屏幕自身的抖色效果不佳的话，选单里可选 6bit 或 7bit，madVR 会增加抖色 (dithered) 输出的强度，色阶过渡会比较好点 (但会增加一些噪点)，一般而言 TN 面板的 LCD 屏幕 6bit 抖色的居多，IPS/VA 面板比较有可能是原生 8bit 或以上。</p>
<p><strong>至于 10bit 输出，除非能完全确定屏幕能够接受 10bit 讯号输入并且显卡驱动程序也能够输出 10bit，才去选择这个选项，如果不能 100% 确定，那还是建议选择 8bit 输出，madVR 的 dithered 8 bit 输出的效果跟 10bit 输出其实差异很小，实际观赏时肉眼几乎难以查觉差异。</strong></p>
<p><strong>另外需注意，10bit 输出，只有在 D3D11 的 FSE (全屏幕独占) 模式下 (这是 general serttings 那边的设定) 或是 win10 操作系统下的窗口全屏幕模式才能达成 (不过目前排除了 NV 卡，因为其驱动以此法输出 10bit 会有造成 banding 的 bug 出现，故 NV 卡目前除了 FSE 模式外都是强制输出 8bit)。</strong></p>
<p><strong>如果你无法确定你的屏幕要选择哪种 bit 数，请自行用灰阶影片来测试，看选择哪一个 bit 数的色阶过渡效果最好，色阶断层 (banding) 最不明显，那个就是最适合你的屏幕的 bit 数设置。</strong></p>
<p>另外关于 6bit 以下的选项，那些只是给你做 dither 算法的测试时使用的，不要做为常驻选项</p>
<p>关于 dither 这技术的原理可参考此篇文章</p>
<p>[<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.ptt.cc/bbs/LCD/M.1374130301.A.402.html">心得] 淺談人眼視覺特性與其應用 - 看板 LCD - 批踢踢實業坊 (ptt.cc)</a></p>
<p>3D format 这项，在观看 3D 影片时才有作用，一般设为 auto 就好，如果显示设备接受特定的 3D 显示形式才需要去切换</p>
<img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/c5f803fec3c0413aa7b1834af9b03405.jpg" class="jop-noMdConv">
<h3 id="calibration">calibration</h3>
<p>到 "calibration" 这页，可以看到四个选项，一般屏幕如果没有经过校色器校色过或是不确定色域的话可维持选第一项 "disable calibration controls for this display" 就好了，最下面那个 "disableGPU gamma ramps" 如果没有校色过的话就不要勾选</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/2a22235909c94b438e115dcad3d802c0.jpg" class="jop-noMdConv">
<p>如果该屏幕经过校色器校色过或是屏幕有色域选项而且其出厂标准可以信任的话，可以选第二项 "this display is already calibrated"，gamut 跟 gamma 就依校色时的条件去选择</p>
<p>第三项 "用 yCMS 校色" 跟第四项 "用 3DLUT 檔校色"，一样需要有校色器的配合，yCMS 是将校色过后的三原色跟灰阶信息自行输入，而 3DLUT 则是用校色后的信息产生一个独立的 3DLUT 档来使用，<strong>目的都是为了能让片源配合屏幕及环境光源状况达到最正确的输出，能够呈现影片制作者原本要表达的画面，而不会因为显示器和传输媒介的个别差异而被扭曲得乱七八糟</strong>。后面两项使用的话显卡内存必须要有至少 1GB 以上，因为这两项功能会建立 Lookup tables，会占用大量的显卡记忆空间。</p>
<p>有兴趣的朋友可先参考此网址：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.avsforum.com/t/1471169/madvr-argyllcms">http://www.avsforum.com/t/1471169/madvr-argyllcms</a></p>
<p>目前由于 ArgyllCMS 和 dispcalGUI 的两位开发者都把 madVR 加入支持，所以已经有一套很完善而且简单的校色流程，只需要去租用一个校色器 (建议是光谱仪 colormunki photo、colormunki design 或 i1 pro 之类的)，照上面网址教学操作很简单就能完成，做出必要的 3DLUT 檔。</p>
<p>当然校色的领域博大精深，其中有不少的 know-how，所以也请原谅我的无限期拖稿，等小弟玩出些心得会再另发专文分享。</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/8f047ed606e146a19b77e45010ca64dc.jpg" class="jop-noMdConv">
<h3 id="display-modes">display modes</h3>
<p>到 "display modes" 这页，这部分是在播放影片时实时改变显示模式用的，可选择播放时改变或是全屏幕时再改变，然后再选择结束播放或是结束全屏幕时要不要改回来。这部份的功能是在显示设备有支持多种显示模式时使用的 (像有些电视或投影机有 24P 输入模式，或要在 59Hz 和 60Hz 之间切换)，可让其配合影片更改屏幕更新率或是分辨率，若<strong>屏幕没支持的话这部分不用勾选。</strong></p>
<p>解释一下选项：</p>
<ul>
<li>
<p>switch to matching display mode…(启用播放时切换显示模式)</p>
<ul>
<li>…when playback stars (只要开始播放就切换)</li>
<li>…when media player goes fullscreen (只要全屏幕播放时才切换)</li>
</ul>
</li>
<li>
<p>restore original display mode…(结束播放时切换回原来的显示模式)</p>
<ul>
<li>
<p>…when media player is closed (播放器关闭时才切回去)</p>
</li>
<li>
<p>…when media player leaves fullscreen (只要退出全屏幕就切回去)</p>
</li>
</ul>
</li>
</ul>
<p><strong>注意要使用自动切换功能，必须在下方的 "list all display modes madVR may switch to:" 底下那个空格填入屏幕能使用的显示模式，没填的话就没有自动切换作用。</strong></p>
<p>以我的 panasonic 电视为例子来说，它的更新率在 1920*1080 下支持 23Hz (实际约 23.976 附近)、24Hz、29Hz (实际约 29.970 附近)、30Hz、59Hz (实际约 59.94 附近)、60Hz 这六种，将其输入可以让 madVR 更精确的切换电视屏幕更新率以对应不同帧率的影片，以上面例子来说，我会在字段输入 1080p23、1080p24、1080p59、1080p60 这四种 (29Hz 跟 30Hz 没必要，因为用其倍数的 59Hz 跟 60Hz 来显示更好)，1080p23 对应帧率 23.976 fps 的影片，1080p24 对应帧率 24 fps 的影片，1080p59 对应帧率 29.970 和 59.940 fps 的影片，1080p60 对应帧率 30 和 60 fps 的影片。</p>
<p><strong>当然这些只是举例，如果是用 2K 或 4K 屏幕的话，前面请自行换成 1440p__或 2160p__</strong></p>
<p>另外有个 "treat 25p movies as 24p" 这功能要配合 Reclock 使用，目的是让欧规 PAL25p 的影片能够降速到 24p 去配合 24p 的显示模式，如果没有在看欧规影片的话这部分也不用理会。</p>
<p>而 "hack Direct3D to make 24.000Hz and 60.000Hz work" 这个选项，在系统是 win8.1 或 win10 时才有作用，win8.1 和 win10，有时候会发生屏幕更新率无法在需要时 (要对应 24fps 或 60fps 影片时) 变更成 24Hz 和 60Hz (屏幕更新率会锁在 23.976Hz 或 59.940Hz)，这个选项可以解决这个问题，但可能有个副作用是会造成 presentation queues 填不满，所以依个人需要决定要不要勾。</p>
<p><img width="690" height="440" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/c867746f0d3b48529a73feb812d28b2b.jpg" class="jop-noMdConv"> <img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/9bcc4b7f8c6f4c6ba5f656f11c9fbef9.jpg" class="jop-noMdConv"></p>
<p>此外，“display modes"这页的设定还有另一个分页"custommodes”，这是 madVR 的另一项有用的屏幕更新率自定义及微调功能，详情请参考我的另一篇介绍文章：</p>
<p>系列番外篇之 3─是时候抛弃 Reclock 了？ madVR 屏幕更新率微调功能简介与实作</p>
<h3 id="color-gamma">color &amp; gamma</h3>
<p>到 "color &amp; gamma" 这页，如果方才的 "calibration" 那页里面选择的是第一项 "disablecalibration controls for this display"，gamma 是预设为 purepower curve 2.2，这时勾选 "enable gamma processing" 并设定为 pure power curve2.2 的话不会有任何改变，如果设为其他值才会改变 gamma</p>
<p>"calibration" 这项如果有设定，举个例子，假设我设定 gamma 为 BT.709 1.8，这时不勾选或是勾选 "enable gamma processing" 并设定为 BT.709 1.8 的话都不会有任何改变，但如果设为其他值就会改变 gamma 的输出</p>
<p>现在回到为什么要改变 gamma 输出的问题，主要是为对应校色时跟你实际观看的环境的差别，例如你的屏幕可能是在暗室校色为 gamma2.4，那么在同样的暗室观赏，不用去动 gamma 值就可以看到影片中的亮部跟暗部细节，但是你如果把同样的屏幕拿到明室中来观看，因为人的眼睛会根据环境光线调整瞳孔大小，所以这时一样的设定可能会让你看不到影片中的暗部细节，这时就要把 gamma 降到 2.2 或是更小来输出，才能得到同样在暗室观赏的效果，但 madVR 不会知道你在哪种环境底下来看影片，所以才需要 "enable gamma processing" 这项来手动更改 gamma 输出</p>
<p>如果是用校色器校色，而且你看影片的环境光线跟校色时选用的 gamma 曲线能够配合的话，那就不需要勾选 "enable gamma processing" 来修正 gamma 值了。</p>
<p>这边我还是假设各位是未校色的屏幕并且 "calibration" 那页里面选择的是第一项 "disablecalibration controls for this display"，那么此处建议底下选择 "purepower curve"，gamma 值一般正常预设 2.2，不过可依环境光源来做调整，较暗的环境中，可增加 gamma 值到 2.4，全暗环境甚至可到 2.6，如此可看到较细微的阶调变化；在较亮的环境中，就必须减少到 2.0 或更低，否则就会看不到暗部细节，不过个人建议还是先设 2.2，实际播放影片时再依当时环境用热键做暂时性的微调就行了。</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/15f8d274b61845e19ce19f4e9b8f3c83.jpg" class="jop-noMdConv">
<p>另外注意到上方有手动颜色控制，可调整对比、亮度、饱和度，色调的部分，这个一般不用去改，有需要再去调就好了 (屏幕方面，我比较建议先调屏幕自身的控制面板，之后不满意再来调这个地方)。</p>
<p>另外总结一下目前 madVR 可以做手动颜色控制的地方有三个：</p>
<ol>
<li>在 madVR 选项里的 "device" 下的 "color &amp; gamma"，针对每个屏幕个别调整，也就是上面的那个。</li>
<li>热键设定里有一堆开头 "source" 的项目，可建立热键，在播放影片时随时用热键调整，调整结果不会被储存。</li>
<li>播放软件的调整接口，效果同 1.，不过调整结果对所有屏幕都会有作用，如下图：</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/9b814a6277b34e68b67207881e07ed8d.jpg" alt=""></p>
<h3 id="HDR">HDR</h3>
<p>到 HDR 这页</p>
<p>如果你没有观看 HDR (High Dynamic Range) 影片的需求的话这边设定可以不用去管它，** 它对于 SDR (Standard Dynamic Range) 的影片是没有任何影响的，而我们目前观看的绝大多数影片都是 SDR 的，** 目前只有一些非常新的 4K 影片会采用 HDR 这项技术，HDR 影片通常会是 BT.2020 色域、10bit 色深。以下简略解释各选项</p>
<img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/cbf7173018a7445ca7696f38e58fbdf5.jpg" class="jop-noMdConv">
<ul>
<li>“let madVR decide”，全部交给 madVR 自行判断，如果屏幕支持 HDR 的话，madVR 会送 HDR 影片和 metadata 的讯号给屏幕 (同第二项 "passthroughHDR content to the display")；如果屏幕不支持 HDR 的话，madVR 会使用 pixel shader math 把 HDR 影片转成 SDR 讯号送出 (同第三项 "convert HDR content to SDR by using pixel shader math"，但效果等同第三项未勾选 "restoredetails in compressed highlights"，转换后细节损失比较多，故屏幕不支持 HDR 的话我建议直接选择第三项)。</li>
<li>“passthrough HDR content to thedisplay”，** 将 HDR 内容和 metadada 不经处理直接送给屏幕，须注意选择此选项屏幕必须完整支持 HDR 内容播放，屏幕不支持 HDR 这选项就没有任何意义。**madVR 在 v0.91.11 之后版本才能完整使用这个选项的功能，支持两种 API 将影片的 metadata 传送给电视去辨识。一种是 NV 或 AMD 卡专用的 HDR API，必须搭配新的驱动，好处是 win7、win8.1、win10 皆可使用；另一种是 win10 内建的 D3D11/DXGI APIs.，这个每家显卡都可用，但只有 win10 下能用，播放时必须使用 D3D11 模式。("calibration" 设定里有 3DLUT 档的话会绕过)</li>
<li>“convert HDR content to SDR by usingpixel shader math”，选择此选项会将 HDR 之内容妥善转换成 SDR 内容后输出给一般 SDR 屏幕使用 ("calibration" 设定里有 3DLUT 档的话则会接在后面套用)<strong>，如果屏幕不支持 HDR 的话我建议选择此项。</strong></li>
<li>“convert HDR content to SDR by usingan external 3DLUT”，选择此选项则须利用校色器跟软件建立 HDR→SDR 转换的 3DLUT 给它使用，转换后输出 SDR 内容给屏幕 ("calibration" 设定里有 3DLUT 档的话会绕过)</li>
<li>“process HDR content by using pixelshader math”，输出 HDR 内容给屏幕，<strong>选择此选项屏幕也必须支持 HDR 播放</strong>，但是是由 madVR 来处理色域跟亮度的转换，例如电视支持 HDR，但是色域是 DCI-P3 的 case ("passthrough HDR content to the display" 那项则是由电视本身处理色域跟亮度的转换)，有时候电视本身没办法很好的处理 HDR 内容的色域跟亮度转换时就适合选择此项。("calibration" 设定里有 3DLUT 档的话会绕过)</li>
<li>“process HDR content by using anexternal 3DLUT”，选择此选项则须利用校色器跟软件建立 HDR→屏幕色域转换的 3DLUT 给它使用，<strong>选择此选项屏幕也必须支持 HDR 播放</strong>。("calibration" 设定里有 3DLUT 档的话会绕过)</li>
</ul>
<p>以下以第三项 "convert HDR content to SDR by using pixel shader math" 为例说明下方之子选项：</p>
<p><strong>target peak nits</strong></p>
<p>可设定范围是 120<sub>10000，HDR 影片使用的亮度范围是 0</sub>10000 nits，它必须有一个支持 HDR 的显示器才能正常显示 (当然还有显卡也要支持)，而一般 SDR 的显示器最大亮度大概在 80~300 nits (例如我的电浆电视校色后最大亮度设定在 120nits)，在 SDR 显示器上播放 HDR 影片是没办法显示正确亮度的，需要经过色调映射 (tone mapping)，这个选项就是让你设定 HDR 影片转换后的亮度，让 HDR 影片可以在 SDR 屏幕上正确显示，不过并不是屏幕亮度设多少这选项就一定要设多少，还必须实际播放测试后去找出最适合的选项。这边设置的数值越低，亮度中间值会拉越高 (整体画面越亮)，数值越高，亮度中间值拉越少 (整体画面越暗)。像我的电视亮度实际大约 120nits，但是这一选项我设定在 200nits 看起来效果比较好。</p>
<p><strong>tone maping curve</strong></p>
<p>设定色调映像用的曲线，建议选择默认的 BT.2390。</p>
<p><strong>gamut mapping algorithm</strong></p>
<p>影片里大于屏幕色域的画素，如果什么都不做的话，色彩坐标超出的部分会被剪除 (例如一个画素 RGB 为 50,320,40，屏幕 255,255,255，则该画素显示时会变成 50,255,40)，会造成 hue (色相) 跟原本的产生差异，颜色会偏移，因此较好的做法是透过降低亮度或降低饱和，等比例去分配 RGB 值，以求在屏幕色域能显示的范围内尽量让 hue 保持不变。此项是选择色域转换所使用的算法，不同的算法设定会造成转换后的颜色呈现有些微的差异，有兴趣的话可慢慢测试不同设定，不然建议先维持默认选项即可。</p>
<p><strong>fix too bright &amp; saturated pixelsby</strong></p>
<p>luminance reduction (降亮度)、saturation (降饱和)，要用哪个则是个难题，有些 HDR 片源适合降亮度，有些适合降饱和，这边建议维持预设 "dynamic luminance &amp; saturation reduction"，让 madVR 自行判断并做动态调整。</p>
<p><strong>measure each frame’s peakluminance</strong></p>
<p>勾选这项会让 madVR 自己计算每一帧的巅峰亮度值，虽然这项信息 HDR metadata 里面有但未必是准确的，因为只有单一数值，而每个帧的亮度是一直变化的，实时测量才能让 madVR 达成更精确的亮度转换 (tone mapping)</p>
<p><strong>restore details in compressedhighlights</strong></p>
<p>在压缩高亮度区域的数值时，因为数值会非常接近，可能导致该区域的细节遗失，勾选此选项的话，会在需要时透过锐化的方式让细节比较容易保留下来</p>
<p><strong>activate anti-bloating filter</strong></p>
<p>AB 滤镜，因为上面有用到锐化故建议勾选</p>
<p><strong>activate anti-ringing filter</strong></p>
<p>AR 滤镜，因为上面有用到锐化故建议勾选</p>
<p>此外，关于 HDR metadata 输出通道，做一些补充说明：</p>
<p>1.Windows 10 Creator’s Update 底下的屏幕设定里面有个选项叫 "HDR and advanced color"(不太确定中文版翻成什么)，关掉的话屏幕永远跑 SDR 模式，开了的话有 HDR 的屏幕永远跑 HDR 模式，Windows 目前无法根据使用者是否跑 HDR 影片或 HDR 游戏而自动把屏幕在 SDR 或 HDR 模式之间切换。</p>
<p>2. 关掉 "HDR andAdvanced Color" 这选项的话 PC 永远会送 SDR 内容给屏幕 (使用 A 或 N 卡自身的 HDR API 时例外，见第 4. 项)，这时候如果用 madVR 播放 HDR 影片并选择第一项 "passthrough HDR content to the display"，如果是 Intel 内显，OS/GPU 会自己做一个质量比较低的 HDR-&gt; SDR 转换，这时候 HDR 影片看起来还是 OK 的，但质量差强人意。SDR 影片则不受影响，仍然是完美的。</p>
<p>3. 打开 "HDR andAdvanced Color" 这选项的话 PC 永远会送 HDR 内容给屏幕 (使用 win10 内建的 API)，这时候 madVR 选择 "passthrough HDR content to the display" 的话，播放 HDR 影片时是完美的，但播放 SDR 影片时，OS/GPU 会自己做 SDR -&gt;HDR 转换，这时候 SDR 影片看起来还是 OK 的，但质量称不上完美。非影片的部分，像桌面跟网页那些，也可能造成颜色异常。</p>
<p>4.Nvidia 和 AMD 自己的 HDR API 解决了上面提到的无法自动切换 HDR 跟 SDR 的问题，<strong>N 卡和 A 卡使用者只要把 win10 的 "HDR and Advanced Color" 这选项关掉，madVR 就自动会使用显卡自己的 HDRAPI，如此一来就可以自动切换屏幕的 SDR 和 HDR 模式</strong>，让 SDR 和 HDR 影片都可以的到最完美的播放效果。</p>
<p>5.N 卡驱动建议更新到 390.65 之后版本，太旧的会不支持显卡自身的 HDR API 或是有 bug。</p>
<p>6.AMD 的 HDR API 限制较多，只能在 10bitD3D11 输出模式下使用，而且必须在全屏幕下才能使用，N 卡的 HDR API 则无此限制。</p>
<p>7. <strong>除非 A 卡或 N 卡的 HDR API 无法正常运作，不然非常不建议去开 win10 自身的 HDR 选项。</strong></p>
<p>===================================</p>
<h2 id="Processing">Processing</h2>
<h3 id="deinterlacing">deinterlacing</h3>
<p>到 "deinterlacing" 这页，建议如图设定：</p>
<p>这边是关于是否启动去交错的一些判断原则，我们让 madVR 自己判断，并选择在怀疑时不启动去交错。</p>
<p>下方 "only look at pixels in the frame center" 这个选项只对 film 型式的交错式 (隔行扫描 interlaced) 影片有影响，也就是说这选项在启动 madVR 的 film mode 时才有作用 (文后有解释)</p>
<p>我们知道对于这类影片必须对其作 IVTC 让它还原成 24p (60i→24p)，但实际上我们有时候会发现录了一部电视播放的电影或动画下来，电视台常常在四边打上跑马灯或台标之类的东西，而这个跑马灯或台标却是 video 型式的 interlaced 讯号 (真正的 60i 无法 IVTC)，因此我们要作 IVTC 时如果是对整个画面的像素作侦测，遇到这种情形时就很容易产生误判。因此勾选这个选项时就只会对画面中央部分的像素作侦测，避开那些跑马灯或台标可能出现的位置以免作 IVTC 时产生误判，但缺点就是这样侦测的效率较低，遇到动画这类常常有静止画面的影片在侦测是哪一类 pulldown 时就会花比较久的时间。<strong>如果会看电视台播放的电影或动画的话，建议勾选此选项，如果是看 DVD 原盘的话，则建议取消勾选。</strong></p>
<p><strong>这选项对 progressive 的影片完全没有影响，如果照字面理解为这选项不利于动画的话那是错误的理解，因为很多动画片源只要是蓝光或是录制下来压制时做过 IVTC 的，都会是 progressive 而非 interlaced。电视台录制下来的原始 TS 檔或是 DVD 原盘才有可能是 interlaced。</strong></p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/21a2f47f760d4dafbd85b058df9de2e4.jpg" class="jop-noMdConv">
<h3 id="zoom-control">zoom control</h3>
<p>接下来到 zoom control 这项，这边是设定画面缩放的一些控制条件，一般来说并不需要做任何设定，不过某些情形下这些选项是很有用的，这边稍微解释一下各个选项及其可能适用的范围</p>
<img width="690" height="465" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/2ea5d0a837744e77a51e7b810b8bddea.jpg" class="jop-noMdConv">
<p>“disable scaling if image size changesby only”：设定片源跟目标分辨率低于几个像素时不执行缩放演算，而以添加黑边代替</p>
<p>“move subtitles”：移动字幕到画面底部或是影片可视范围内 (搭配下面的侦测跟移除黑边功能)</p>
<p>“automatically detect hard coded blackbars”：自动侦测影片内部的黑边，这里的黑边，并不是指影片比例跟屏幕比例不一样产生的那种黑边，而是<strong>指影片编码时就被包含在其中的黑边</strong>，这边我举两个例子来说明。</p>
<p>例 1：很多电影是用 21:9 这种超宽比例来拍摄，但是发行 BD 时，仍然按照规范采用 16:9 的画面比例编码 (影片分辨率 1920*1080)，也就是会在 21:9 的画面中加入上下两道黑边让它变成 16:9 的画面 (如下图所示)，这在一般 16:9 或 16:10 的显示器上播放当然没有什么问题，但是如果在 21:9 的显示器上播放的话，就会变成除了上下两道黑边外再加上左右两道黑边，因为要把 16:9 的画面塞到 21:9 的显示器中，不破坏画面比例的话左右必然会有黑边。但我们可以发现它的影像实际画面范围就是 21:9，明明放到 21:9 屏幕上却白白多加了上下左右四道黑边，这是一种浪费，于是 madVR 这个选项就是让它去侦测出实际的画面范围，以便让 21:9 的影像内容确实填满 21:9 的屏幕，不用浪费在四道黑边上面。</p>
<p>而就算我们在 16:9 的显示器上播放这类影像，用这功能把实际的画面范围抓出来的话，亦可以减少渲染输出时的效能消耗，因为渲染的范围减少了 (例如原本连黑边要渲染 1920*1080 的分辨率范围，抓出实际范围后只渲染有画面的 1920*823 的那部分)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/6eb7aa4bd7904e6f9c0e0bbc3400f522.jpg" class="jop-noMdConv">
<p>例 2：有些 SD 的讯号源，像电视的 SD 频道，它的比例都是 4:3 (640*480)，但其实里面的节目有些是 16:9 的画面，只是它塞在 4:3 的框架里去播，多加了上下两道黑边，如果放到 16:9 的屏幕上看的话，左右也会多出黑边 (如下图)，一样也是白白浪费了上下左右四道黑边的范围。这选项也是可以把 16:9 的画面抓出来填满 16:9 的屏幕</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/3e836055ae8449d1aac287e7f3ec5701.jpg" class="jop-noMdConv">
<p>继续解释一下下面的子选项</p>
<p>“if black bars change pick one zoomfactor”：如果黑边改变的话选取一个缩放比例</p>
<ul>
<li>不损失任何画面内容为原则</li>
<li>砍除 25% 黑边</li>
<li>砍除 50% 黑边</li>
<li>砍除 75% 黑边</li>
<li>砍除全部黑边</li>
</ul>
<p>“if black bars change quickly back andforth”：如果黑边改变很快速的话</p>
<ul>
<li>不切换缩放比例低于 2 秒、5 秒、15 秒或 45 秒</li>
<li>选定一个通用的缩放比例 (不损失原则、25% 黑边、50% 黑边、75% 黑边、全部黑边)</li>
</ul>
<p>“notify media player about croppedblack bars”：多久通知一次播放器缩放比例改变 (实时、2 秒、5 秒、15 秒、45 秒)</p>
<p>“always shift the image”：切齐画面顶部或是底部</p>
<p>“keep bars visible if they containsubtitles”：如果上面有字幕的话保留黑边 (字幕出现后保留黑边 5 秒、15 秒、45 秒、3 分、10 分、30 分、90 分或永远)</p>
<p>“cleanup image borders bycropping”：除了黑边外也切掉一些实际画面边缘 (给一些边缘比较糟糕的影像使用)，可切 1~7 个像素，从有移除黑边的地方切或是不管有没有黑边直接切</p>
<p>“if there are big black bars”：有大范围黑边的话，直接移除 25%、50%、75% 或全部黑边并放大影像 (有超出屏幕范围可能，小心使用)</p>
<p>“zoom small black bars away”：有小范围黑边的话直接裁掉放大，不过为了维持原画面比例会多裁到一点实际画面 (不是很确定，待确认)</p>
<p>“crop black bars”：勾选后会把片源视为裁切黑边后的分辨率跟宽高比例去处理，会影响到 profile 的判定 (如果有设置的话)</p>
<p><strong>请注意，如果你觉得影片有被切的怪怪的情形发生时，请先把 zoom control 底下的选项都先全部取消勾选看看</strong></p>
<h3 id="image-enhancements">image enhancements</h3>
<p>接下来到 image enhancements 这项，<strong>这个选项是针对影片本身锐利度不足的片源，经由勾选的算法进行锐利化处理，其处理是在放大演算之前 (pre-processing)</strong>，所以对于 1:1 呈现的影像也有效果。在这边，不论选择哪一种算法，锐化的效果都相当显著，但相对的，片源中的缺陷 (噪声) 也很容易被凸显出来，跟后面的 upscaling refinement (post-processing) 比较起来，同样的锐化算法，副作用也会更明显，故 ** 不建议当作常驻选项。** 这边建议是制作 Profile，像下图那样，第一个 Profile 是常驻，不勾选任何锐化算法的，其他 Profile 则有开锐化算法，并设定热键，视片源需要用热键来开启锐化算法。</p>
<img width="690" height="429" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/17df68b860544f9bb27950c6911cf6be.jpg" class="jop-noMdConv">
<p>关于 image enhancements 的锐化算法，理论上是越干净的片源越适合开，而且应该是有需要才开，有些片源锐化后整体观感不见得比较好。如果片源不够干净，你觉得有需要锐化，也可以开，自行取舍，看锐利度跟细节的提升愿不愿意用画面噪声或是锯齿变多这个代价去换。个别算法的简介到 upscaling refinement 那边一起写。</p>
<h3 id="artifact-removal">artifact removal</h3>
<p>接下来到 artifact removal 这项</p>
<p>“reduce banding artifact”</p>
<p>banding，即色阶断层或称色带， google 一下就能看到一堆范例图了，这个选项是 debanding (去色阶断层) 功能，ffdshow video decoder 里面也有个 "去断层"，跟这个基本上是一样的作用，但 madVR 的 debanding 因为处理的精度更高，侦测像素变化的机制更好，故效果会比 ffdshow video decoder 里面的去断层更好，使用这个的话就不需要再使用 ffdshow video decoder 的去断层了。</p>
<p>第一个选项是一般画面的 debanding 强度，第二个选项是光影淡入淡出时的 debanding 强度，建议设置如下，保持在 low 就有不错的效果，或是第二个选项可以选择 medium 或 high，因为光影淡入淡出是比较容易出现 banding 的地方，但基本上还是看片源而定。越高的设定有越好的 debanding 效果，不过相对的也可能损失一些画面细节。</p>
<p>这个选项会吃掉一些显卡效能，但不会太多，显卡不差的话建议常时保持在 low，有一定的 debanding 效果，而且几乎不会吃到画面细节。</p>
<p>不过对于一些 4K"原生"10bit 以上的影片而言，比较不容易出现 banding，这个选项就不需要开，可以省下一些效能，像我自己是设一个 profile 让它播放 4K 10bit 的影片时不启用</p>
<p><img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/b9288f0318004f3aa45b7400e68f59fe.jpg" class="jop-noMdConv"> <img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/fa7ca91727334f9aaff7667453926e84.jpg" class="jop-noMdConv"></p>
<p>这边也简单讨论一下 banding，维基上有个简介：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zh.wikipedia.org/wiki/%E8%89%B2%E5%BD%A9%E5%B8%B6">色彩带 - 维基百科，自由的百科全书 (wikipedia.org)</a></p>
<p>基本上，我们现在可以取得的大部分片源，包括 BD，或电视台播送的讯号，RGB 都是只有 8bit 的色深而已，也就是说，电影母带在制作成 BD 时就可能会有 banding 产生了。再来，如果我们对 BD 或电视讯号再进行压制编码，由于流量或色深的不足，这个过程也可能再产生 banding (这也是为何现在有人喜欢用 10bit 压制影片的原因，因为在同量的流量下可以很好的抑制 banding 的产生)。再来，影片都是以 YUV 色域储存的，在计算机上播放时还必须经过 YUV→RGB 的转换以及 Y/C 伸张 (16<sub>235 伸张成 0</sub>255)，这个转换的过程如果精度不够高也可能产生 banding，而 madVR 本身的高精度转换和 dithered 输出就很好的避免了这个步骤下 banding 的产生，但别忘了我们无法控制来自片源的 banding，所以 madVR 才又加入 debanding 的算法来进一步消灭掉所有的 banding 问题，这也是为何我会建议把这个选项常时开启的原因，就算是观看 BD 原盘它还是有作用在的。</p>
<p>这边提供一个测试影片：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.mediafire.com/file/4ubjm6jjbsz8dct/Gradient-2k.mp4/file">梯度 - 2k (mediafire.com)</a></p>
<p>各位可以试试看在 EVR-CP 底下关闭全浮点运算、EVR-CP 开启全浮点运算、madVR 默认值、madVR 启用 debanding 这四种状况来比较 banding 的差异，基本上第一种情形 banding 最明显，第二、第三种会有接近的结果，第四种则几乎没有 banding 了，色阶的过渡会非常平滑。</p>
<p>这边也提供一个 madVR 的 debanding 改善压制过程产生的 banding 的范例，看到以下四张图片 (点图放大)：</p>
<p>madVR 无开启 debanding，可发现渣介脸上有明显条纹</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/7b8e5b0046e64c8ab5624d295f718c49.jpg" class="jop-noMdConv">
<p>开启 debanding，low</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/477cdcb3bb194dd29bfa67284843ea72.jpg" class="jop-noMdConv">
<p>开启 debanding，medium</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/f3f4cd23a46d41d2acec3166e9be3670.jpg" class="jop-noMdConv">
<p>开启 debanding，high</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/d1e84c4f53f24547a340fbb8540dd9f4.jpg" class="jop-noMdConv">
<p>可见 low 就有不错的效果了，诸如此类各位可自行测试，针对不同的片源，善用热键或是 profile 来设置必要的 debanding 强度。(profile 的使用方法我 PO 在另一篇文中介绍)</p>
<p>而下面的 "reduce ringing artifects"，要先认识一下 ringing，详细请看 WIKI：</p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zh.wikipedia.org/wiki/%E6%8C%AF%E9%88%B4%E6%95%88%E6%87%89">振铃效应 - 维基百科，自由的百科全书 (wikipedia.org)</a></p>
<p>madVR 里的众多算法，很多都有搭配 anti-ringing 滤镜，就是为了抑制这个震铃效应。而这边这个选项，则是为了处理<strong>影片本身就存在的 ringing</strong>，影片会有 ringing 出现，通常是高分辨率的母片在后制成较低分辨率的产品输出时 (例如 DVD)，使用了较差的降频算法时产生的。<strong>这个选项比较没必要常驻开启，而是明显观察到影片上有 ringing 时再开就好了 (可设定热键)</strong>。下面的子选项，“reduce dark halos around bright edges, too”，是针对明亮物体边缘的深色系光环 (这类似乎在黑白电影比较常见)，这选项不适用在动画类。</p>
<p>以下是一组有明显 ringing 的例子，跟 deringing 后的效果 (点图放大)：</p>
<p>原图</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/f4179bd4fc7c4bda86adeef49bbf648b.jpg" class="jop-noMdConv">
<p>deringing</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/c2d50b9fd6e64508a46f761419bf26d8.jpg" class="jop-noMdConv">
<p>接下来看到 "reduce compression artifacts"，以下简称 RCA，此项作用为去除压缩失真，严格来说它具备有去除区块失真 (deblocking)、画面噪声跟噪点的作用，但缺点就是可能会对画面细节造成破坏，故不建议常驻使用，建议设置热键在需要时手动开启即可。其可调强度为 1<sub>14，强度越高，画面净化效果越强，但相对的画面细节也会被抹去越多，画面可能变的平面化，失去立体感，因此使用上需注意，建议在画面净化效果可接受的情况下尽可能选择较低的强度。以个人经验来说，真人影片类大部分开 1</sub>6 之间即可，动画类 6~10 之间，但这非准则，实际仍要视当下片源状况而定，有些干净的片源根本不需要开，有些则是开了发现细节被破坏，这时就必须降低强度，有些片源噪声失真非常严重，这时就需要增加强度。</p>
<p>qualily 的部分，则是处理的质量，very high 的质量最好，能够更精确的判断噪声跟细节，high 次之，依此类推，但从 high 到 very high 所增加的效能消耗非常多，而且跟影片放大的目标分辨率成正比，须注意。(如果不搭配 NGU sharp 使用的话，建议开到 high 就好)</p>
<p>底下子选项 "process chroma channels, too"，如果勾选的话，RCA 也会在 chroma 升频时介入处理，但会消耗较多的效能，而且 chroma 升频时做 RCA 的效果并不明显，因此并不建议勾选此选项。(这项不勾选的时候，RCA 就只有在 luma 升频时才会介入，因此影片 1:1 播放时就不会有 RCA 的效果)</p>
<p>子选项 "activate only if it comes for free (as part of NGU sharp)"，<strong>这项勾选的话则 RCA 将只有在升频算法使用 NGU sharp 的时候启用后才会有作用，但是完全不会增加任何额外的效能消耗</strong>，勾选后 qualily 的部分视 NGU sharp 的运算强度是使用 low、normal、high 还是 very high，而自动对应，但是不管如何对应，RCA 的部分都不会增加额外效能消耗，<strong>因此如果升频算法使用 NGU sharp 的话强烈建议勾选此选项，但如果升频算法不是用 NGU sharp 的话则不要勾选，否则 RCA 启用后也不会有作用。</strong></p>
<p>最后是 "reduce random noise"，以下简称 RNN，此项作用为去除粒状噪声跟噪点 (denoise)，其去除噪点的效果比上面的 "reduce compression artifacts" 还要显著许多，但相对的也更容易破坏画面细节，因此一样不建议常驻使用，建议设置热键在需要时手动开启即可。其可调强度为 1~10，强度越高，去噪点效果越强，但画面细节破坏也越严重，须谨慎使用。</p>
<p>子选项 "process chroma channels, too" 的部分同 RCA</p>
<p>以下提供一些 RCA 跟 RRN 的效果范例：</p>
<p>640x480→1440x1080 NGU-sharp (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/dd41010a5e774f86863f67395ff9eafe.jpg" class="jop-noMdConv">
<p>640x480→1440x1080 NGU-sharp+RCA 5 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/6852380bb2b247b087a78c46a828ae7e.jpg" class="jop-noMdConv">
<p>640x480→1440x1080 NGU-sharp+RRN 3 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/4a1e959dd71940d9ae13bcf1c7a1fffa.jpg" class="jop-noMdConv">
<p>640x480→1440x1080 NGU-sharp (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/3668fefac3ba4ce794b349d34d19dcf3.jpg" class="jop-noMdConv">
<p>640x480→1440x1080 NGU-sharp+RCA 5 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/1f3534ee2dba4b7dbe376b83230ece65.jpg" class="jop-noMdConv">
<p>640x480→1440x1080 NGU-sharp+RRN 3 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/d78a96c5d93046e491c68415bcca3010.jpg" class="jop-noMdConv">
<p>1280x720→1920x1080 NGU-sharp (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/397e34eaede04693aa1c129befe789fd.jpg" class="jop-noMdConv">
<p>1280x720→1920x1080NGU-sharp+RCA 6 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/38e8acf5c8c245feb5b006ecdf467f24.jpg" class="jop-noMdConv">
<p>1280x720→1920x1080NGU-sharp+RCA 8 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/96aef4971d544679b2465c231a65bc23.jpg" class="jop-noMdConv">
<p>1280x720→1920x1080NGU-sharp+RCA 10 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/a0fad5a505364322bba22a33d460bd77.jpg" class="jop-noMdConv">
<p>1280x720→1920x1080NGU-sharp+RCA 14 (点击放大)</p>
<img width="690" height="388" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/6b858b83416447319ccc90dc092dbe14.jpg" class="jop-noMdConv">
<h3 id="选项热键设置">选项热键设置</h3>
<p>另外介绍一下这边热键设置的几种方法</p>
<img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/b2b0115cb15443db966c9821d9a9e3c4.jpg" class="jop-noMdConv">
<p>第一，可以到 keyboard shortcuts 底下，找到我圈起来的那几项，会调到的几项，后面自己输入习惯的热键</p>
<ul>
<li>
<p>debanding - toggle strength (debanding 强度切换)</p>
</li>
<li>
<p>debanding - toggle on/off (debanding 开关)</p>
</li>
<li>
<p>debanding custom settings - toggle (debanding 自定义参数切换)</p>
</li>
<li>
<p>deringing - toggle (deringing 开关)</p>
</li>
<li>
<p>deblocking - toggle (RCA 开关)</p>
</li>
<li>
<p>deblocking strength - increase (RCA 强度增加)</p>
</li>
<li>
<p>deblocking strength - decrease (RCA 强度降低)</p>
</li>
<li>
<p>denoise - toggle (RRN 开关)</p>
</li>
<li>
<p>denoise strength - increase (RRN 强度增加)</p>
</li>
<li>
<p>denoise strength - decrease (RRN 强度降低)</p>
</li>
</ul>
<p>第二，设置 profile，并以组别设置热键方便快速切换，并搭配上面的强度热键快速调整，例如下图，我设置了 "Tab" 跟 "Back" 两个热键来快速切换两组 profile：</p>
<p><img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/77f71582eff24b3e92b1ca53b31a5c08.jpg" class="jop-noMdConv"> <img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/8e1f1f84ec024b7898b78bacada1bb9c.jpg" class="jop-noMdConv"><img width="690" height="433" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/17/8b3d92b0ff80485d87a14c4a57c7a888.jpg" class="jop-noMdConv"></p>
<div class="note green icon flat"><i class="note-icon fas fa-rocket"></i><p>下篇 <a href="/undefined/fa26939c.html" title="最强渲染器 madVR - 使用指南（下篇）">⚡️ 最强渲染器 madVR - 使用指南（下篇）</a></p>
</div>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Dyphire</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://dyphire.github.io/undefined/5c519828.html">https://dyphire.github.io/undefined/5c519828.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://dyphire.github.io" target="_blank">泛舟湖上</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%BD%AC%E8%BD%BD/">转载</a><a class="post-meta__tags" href="/tags/madvr/">madvr</a><a class="post-meta__tags" href="/tags/%E5%BD%B1%E9%9F%B3%E7%9B%B8%E5%85%B3/">影音相关</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/illust_69873967.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/undefined/6d841ea9.html"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/post-bg-2015.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">GitHub Pages 加速教程</div></div></a></div><div class="next-post pull-right"><a href="/undefined/fa26939c.html"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/06/supervise.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">最强渲染器 madVR - 使用指南（下篇）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/undefined/fa26939c.html" title="最强渲染器 madVR - 使用指南（下篇）"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/06/supervise.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-18</div><div class="title">最强渲染器 madVR - 使用指南（下篇）</div></div></a></div><div><a href="/undefined/6d841ea9.html" title="GitHub Pages 加速教程"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/15/post-bg-2015.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-15</div><div class="title">GitHub Pages 加速教程</div></div></a></div><div><a href="/undefined/75417d5b.html" title="OneComic 教程"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/07/17/Sea---The-lighthouse.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-17</div><div class="title">OneComic 教程</div></div></a></div><div><a href="/undefined/6199169a.html" title="Git 使用方法"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/git.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-01</div><div class="title">Git 使用方法</div></div></a></div><div><a href="/undefined/dc535e76.html" title="Now-subconverter 使用指南"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/09/05/valley.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-09-05</div><div class="title">Now-subconverter 使用指南</div></div></a></div><div><a href="/undefined/6d798241.html" title="PicGo+GitHub 图床搭建"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/20e50399-dea1-4d2f-ab50-87685d428b7f.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-02</div><div class="title">PicGo+GitHub 图床搭建</div></div></a></div><div><a href="/undefined/2f57a694.html" title="正则表达式"><img class="cover" src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/%E6%AD%A3%E5%88%99.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-06-01</div><div class="title">正则表达式</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/06/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Dyphire</div><div class="author-info__description">随手记录，信笔涂鸦。</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">17</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">21</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/dyphire"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dyphire" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dyphire@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">随手记录，信笔涂鸦</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#madVR-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">madVR 概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Devices"><span class="toc-number">2.</span> <span class="toc-text">Devices</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%92%AD%E6%94%BE%E5%99%A8%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">播放器准备工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%99%A8%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.2.</span> <span class="toc-text">显示器设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#properties"><span class="toc-number">2.3.</span> <span class="toc-text">properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#calibration"><span class="toc-number">2.4.</span> <span class="toc-text">calibration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#display-modes"><span class="toc-number">2.5.</span> <span class="toc-text">display modes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#color-gamma"><span class="toc-number">2.6.</span> <span class="toc-text">color &amp; gamma</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HDR"><span class="toc-number">2.7.</span> <span class="toc-text">HDR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Processing"><span class="toc-number">3.</span> <span class="toc-text">Processing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#deinterlacing"><span class="toc-number">3.1.</span> <span class="toc-text">deinterlacing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zoom-control"><span class="toc-number">3.2.</span> <span class="toc-text">zoom control</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#image-enhancements"><span class="toc-number">3.3.</span> <span class="toc-text">image enhancements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#artifact-removal"><span class="toc-number">3.4.</span> <span class="toc-text">artifact removal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E9%A1%B9%E7%83%AD%E9%94%AE%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.5.</span> <span class="toc-text">选项热键设置</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/undefined/f7478520.html" title="KomgaBangumi 漫画服务器元数据刮削器"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="KomgaBangumi 漫画服务器元数据刮削器"/></a><div class="content"><a class="title" href="/undefined/f7478520.html" title="KomgaBangumi 漫画服务器元数据刮削器">KomgaBangumi 漫画服务器元数据刮削器</a><time datetime="2025-06-02T04:24:27.000Z" title="发表于 2025-06-02 12:24:27">2025-06-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/13234df3.html" title="Alass：一种文本字幕批量自动调轴工具"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2022/02/03/404.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Alass：一种文本字幕批量自动调轴工具"/></a><div class="content"><a class="title" href="/undefined/13234df3.html" title="Alass：一种文本字幕批量自动调轴工具">Alass：一种文本字幕批量自动调轴工具</a><time datetime="2022-02-03T11:14:53.000Z" title="发表于 2022-02-03 19:14:53">2022-02-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/57389c55.html" title="Shell 终端美化教程"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/09/11/post-bg-css.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Shell 终端美化教程"/></a><div class="content"><a class="title" href="/undefined/57389c55.html" title="Shell 终端美化教程">Shell 终端美化教程</a><time datetime="2021-09-11T15:00:21.000Z" title="发表于 2021-09-11 23:00:21">2021-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/198c7fc6.html" title="Scoop 包管理教程"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/09/11/post-bg-os-metro.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Scoop 包管理教程"/></a><div class="content"><a class="title" href="/undefined/198c7fc6.html" title="Scoop 包管理教程">Scoop 包管理教程</a><time datetime="2021-09-11T14:50:21.000Z" title="发表于 2021-09-11 22:50:21">2021-09-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/undefined/dc535e76.html" title="Now-subconverter 使用指南"><img src="https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/09/05/valley.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Now-subconverter 使用指南"/></a><div class="content"><a class="title" href="/undefined/dc535e76.html" title="Now-subconverter 使用指南">Now-subconverter 使用指南</a><time datetime="2021-09-05T10:25:21.000Z" title="发表于 2021-09-05 18:25:21">2021-09-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/dyphire/PicGo/img/2021/06/04/essay.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By Dyphire</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-api-tau.vercel.app/',
      path: location.pathname,
      visitor: false,
      dark: 'html[data-theme="dark"]'
    }, null))
  }

  if (typeof Waline === 'function') initWaline()
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !false) {
  if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><div class="aplayer no-destroy" data-id="12328848640" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="true" data-loop="all" data-order="random" data-lrctype="0" data-preload="none" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-theme="#42b983" muted></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" data-mobile="false" data-text="发现,你,了" data-fontsize="15px" data-random="false" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/show/"]):not([href="/bangumis/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>